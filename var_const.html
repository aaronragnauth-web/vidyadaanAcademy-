<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Multiple Choice Quiz — 30 Random Questions (80% pass)</title>
<style>
:root{--bg:#f4f7fb;--card:#ffffff;--accent:#2563eb;--muted:#6b7280;--success:#16a34a;--fail:#dc2626; --return-btn-bg:#e5e7eb; --return-btn-color:#1f2937; --timer-warn:#f59e0b; --overall-timer-bg:#fef3c7; --overall-timer-color:#d97706;}
*{box-sizing:border-box}
body{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; background:var(--bg); margin:0; color:#111}
.wrap{max-width:900px;margin:36px auto;padding:22px}
.card{background:var(--card);border-radius:14px;padding:22px;box-shadow:0 6px 20px rgba(16,24,40,0.06)}
/* Updated header to use flex for button alignment */
header{display: flex; justify-content: space-between; align-items: flex-start;}
header h1{margin:0;font-size:20px}
header p{margin:6px 0 0;color:var(--muted);font-size:13px}

/* New: Overall Timer Box */
.overall-timer-box{
  background: var(--overall-timer-bg);
  color: var(--overall-timer-color);
  padding: 8px 15px;
  border-radius: 8px;
  font-weight: 700;
  font-size: 15px;
  margin-top: 10px;
  text-align: center;
  border: 1px solid #fcd34d;
}
.overall-timer-box.critical{
  background: #fef2f2;
  color: var(--fail);
  border-color: var(--fail);
}


.meta{display:flex;gap:12px;align-items:center;margin-top:16px}
.meta .pill{background:#eef2ff;color:var(--accent);padding:6px 10px;border-radius:999px;font-weight:600;font-size:13px}
.progress-wrap{margin:18px 0}
.progress{height:10px;background:#e6eefc;border-radius:999px;overflow:hidden}
.progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--accent),#7c3aed);width:0%}
.qbox{margin-top:18px}
.question-header{
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    margin-bottom: 12px;
    /* FIX: Allow content to wrap */
    flex-wrap: wrap; 
}
.question{
    font-weight:600; 
    margin: 0;
    /* FIX: Force this element to take full width when using <br> */
    width: 100%;
    margin-bottom: 10px;
}
.timer{font-weight: 700; color: var(--accent); font-size: 16px; padding: 4px 8px; border-radius: 6px; border: 1px solid #eef2ff;}
.timer.warn{color: var(--fail); border-color: var(--fail);}
.choices{display:grid;gap:10px}
.choice{background:#fbfdff;border:1px solid #eef3ff;padding:12px;border-radius:8px;cursor:pointer;display:flex;align-items:center;gap:12px; transition: border-color 0.2s;}
.choice:hover{border-color:var(--accent);}
.choice input{accent-color:var(--accent)}
.controls{display:flex;gap:10px;justify-content:space-between;align-items:center;margin-top:18px}
button{background:var(--accent);color:#fff;border:0;padding:10px 14px;border-radius:8px;font-weight:600;cursor:pointer; transition: background-color 0.2s;}
button:hover:not([disabled]){background:#1d4ed8;}
button[disabled]{opacity:.5;cursor:default}
.muted{color:var(--muted);font-size:14px}

/* Return Button Style */
#returnBtn{
  background: var(--return-btn-bg);
  color: var(--return-btn-color);
  padding: 8px 12px;
  font-size: 13px;
  margin-left: 20px;
  align-self: center;
  border: 1px solid #d1d5db;
}
#returnBtn:hover{
  background: #d1d5db;
}

.result{display:none;margin-top:18px}
.result.show{display:block}
.score{font-size:20px;font-weight:700}
.pass{color:var(--success)}
.fail{color:var(--fail)}
.review{margin-top:16px}
.review .rev-item{padding:12px;border-radius:8px;border:1px solid #eef2ff;margin-bottom:10px;background:#fff}
.correct-badge{display:inline-block;padding:4px 8px;border-radius:999px;background:#ecfaef;color:var(--success);font-weight:700;margin-left:10px}
.wrong-badge{display:inline-block;padding:4px 8px;border-radius:999px;background:#fff1f2;color:var(--fail);font-weight:700;margin-left:10px}
.unanswered-badge{display:inline-block;padding:4px 8px;border-radius:999px;background:#fefce8;color:#a16207;font-weight:700;margin-left:10px}


footer{margin-top:22px;text-align:center;color:var(--muted);font-size:13px}
@media (max-width:600px){
  .wrap{padding:12px}
  header { flex-direction: column; align-items: flex-start; }
  #returnBtn { margin-left: 0; margin-top: 10px; }
}
</style>
</head>
<body>
<div class="wrap">
<div class="card">
<header>
  <div>
    <h1>Multiple Choice Quiz — 30 Random Questions</h1>
    <p>Pass rate: <strong>80%</strong> (24/30). Questions are randomly selected each time you load the page.</p>
  </div>
<a href="blended_it.html">
    <button id="returnBtn">
        ← Return to main page
    </button>
</a>

</header>
<div class="overall-timer-box">
  Time Remaining for Quiz: <span id="overallTimerDisplay">30:00</span>
</div>
<div class="meta">
<div class="pill">30 questions</div>
<div class="muted">60 seconds per question limit, 30 minutes overall limit.</div>
</div>
<div class="progress-wrap">
<div class="progress" aria-hidden="true">
<i id="progBar" style="width: 0%;"></i>
</div>
</div>
<div class="qbox card" id="quizArea" style="margin-top:8px"></div>
<div class="result" id="resultBox">
<div class="card">
<div class="score" id="scoreText"></div>
<div id="passText" style="margin-top:6px"></div>
<div class="review" id="reviewList"></div>
</div>
</div>
<footer>Quiz loaded in memory. Reload the page to reshuffle questions.</footer>
</div>
</div>

<script>
const TOTAL_QUESTIONS = 30;
const PASS_RATE = 0.8;
const REQUIRED_SCORE = TOTAL_QUESTIONS * PASS_RATE;
const TIME_PER_QUESTION = 60; // seconds
const TOTAL_QUIZ_TIME = 30 * 60; // 30 minutes in seconds

let individualTimerInterval;
let overallTimerInterval;
let overallTimeRemaining = TOTAL_QUIZ_TIME;


const QUESTION_BANK = [
{q:'Which of the following describes a variable?', choices:['A storage location whose value CAN CHANGE during program execution','A storage location whose value is FIXED and CANNOT CHANGE','A type of data','A memory address that never stores data'], a:0},
{q:'Which of the following is an example of a constant?', choices:['user_score = 50','MAX_LEVEL = 10','temperature = 25','age = 18'], a:1},
{q:'Which of these would be best stored in a variable?', choices:['The value of π','The user’s score','MAX_LIVES','The conversion factor from meters to feet'], a:1},
{q:'Which of these would be best stored as a constant?', choices:['Age of a user','User input','The number of lives in a game','Current temperature'], a:2},
{q:'What is the data type for numbers without decimals?', choices:['Floating Point','Integer','String','Boolean'], a:1},
{q:'Which data type would 3.14 belong to?', choices:['Integer','Floating Point','Character','Boolean'], a:1},
{q:'Which data type represents True or False?', choices:['Integer','String','Boolean','Character'], a:2},
{q:'Which data type is suitable for storing "Hello World"?', choices:['String','Character','Integer','Boolean'], a:0},
{q:'Which of the following is an example of a character?', choices:['"A"','A','"Hello"','True'], a:1},
{q:'Which of these operations is appropriate for floating point numbers?', choices:['Addition and Subtraction only','Precise calculations like money','Concatenation','Logical comparison'], a:1},
{q:'Which of these is an example of a variable?', choices:['user_score','MAX_SPEED','PI','MAX_LEVEL'], a:0},
{q:'Which of the following is a correct variable name in Python?', choices:['first_name','1st_score','first name','if'], a:0},
{q:'Which of these is NOT allowed as a starting character of a variable?', choices:['A letter','An underscore','A number','All are allowed'], a:2},
{q:'Which of the following is NOT allowed in a variable name?', choices:['Spaces','Underscores','CamelCase','Starting with a letter'], a:0},
{q:'Which of these is NOT a reserved keyword in programming?', choices:['if','while','user_input','boolean'], a:2},
{q:'Which of the following could be stored in a string variable?', choices:['"S2023"','25','True','3.14'], a:0},
{q:'A variable can change its value during program execution.', choices:['True','False'], a:0},
{q:'A constant can have its value changed while the program runs.', choices:['True','False'], a:1},
{q:'Floating point numbers are used when precision is needed, such as for money.', choices:['True','False'], a:0},
{q:'Boolean variables can only store True or False.', choices:['True','False'], a:0},
{q:'Variable names cannot contain spaces.', choices:['True','False'], a:0},
{q:'Character data type stores a single letter, digit, or symbol.', choices:['True','False'], a:0},
{q:'Integer data type can store numbers with decimals.', choices:['True','False'], a:1},
{q:'Using keywords as variable names is allowed in programming.', choices:['True','False'], a:1},
{q:'Variables can be used to store dynamic data like user input.', choices:['True','False'], a:0},
{q:'Strings can store sequences of letters, numbers, or symbols.', choices:['True','False'], a:0},
{q:'A variable can start with an underscore (_) in most programming languages.', choices:['True','False'], a:0},
{q:'Which of these values is best stored as a variable?', choices:['MAX_SPEED','user_temperature','PI','MAX_LIVES'], a:1},
{q:'Which of the following is an invalid variable name?', choices:['_score','2nd_attempt','highScore','user_name'], a:1},
{q:'Which of the following is a good example of a constant?', choices:['user_input','MAX_SCORE','score','temperature'], a:1},
{q:'Which of these can be stored in a boolean variable?', choices:['25','True','"Hello"','3.14'], a:1},
{q:'Which of the following is a valid floating-point number?', choices:['15','3.1415','"3.14"','True'], a:1},
{q:'Which data type should be used for a user’s first initial?', choices:['String','Character','Integer','Boolean'], a:1},
{q:'Which of the following is true about integers?', choices:['They can store decimals','They are used for whole numbers','They represent True or False','They store sequences of characters'], a:1},
{q:'What would be the correct name for a variable storing the user’s first name?', choices:['first name','first_name','1stName','firstName?'], a:1},
{q:'Which of the following variable names is correct?', choices:['user-age','user_age','user age','user age1'], a:1},
{q:'Which of the following best describes a constant?', choices:['Value never changes','Value changes with user input','Always stores strings','Always stores numbers'], a:0},
{q:'Which data type is most suitable for storing the sentence "Welcome to Class Two"?', choices:['Character','String','Integer','Boolean'], a:1},
{q:'Which of the following is NOT a correct variable naming rule?', choices:['Cannot start with a number','No spaces allowed','Can use keywords like if or while','Can start with an underscore'], a:2},
{q:'Which data type is most appropriate for storing money with cents?', choices:['Integer','Floating Point','String','Boolean'], a:1},
{q:'Which of the following is NOT a correct variable name?', choices:['userScore','user_score','User Score','_userScore'], a:2},
{q:'Constants are used to store values that do not change during program execution.', choices:['True','False'], a:0},
{q:'Variables are used to store dynamic data that can change during program execution.', choices:['True','False'], a:0},
{q:'You can use spaces in variable names if you use underscores.', choices:['True','False'], a:1},
{q:'Variable names cannot start with a number.', choices:['True','False'], a:0},
{q:'All programming languages allow constants to change values during execution.', choices:['True','False'], a:1},
{q:'A string can contain letters, numbers, or symbols.', choices:['True','False'], a:0},
{q:'Boolean variables are used for calculations like addition and subtraction.', choices:['True','False'], a:1},
{q:'A character stores exactly one letter, number, or symbol.', choices:['True','False'], a:0},
{q:'Integers can be positive, negative, or zero.', choices:['True','False'], a:0},
{q:'Floating-point numbers are always rounded to the nearest whole number.', choices:['True','False'], a:1},
{q:'Variable names cannot use reserved keywords in programming languages.', choices:['True','False'], a:0},
{q:'Which variable name follows proper naming rules?', choices:['user#score','user_score','user score','2userScore'], a:1},
{q:'Which data type is most appropriate for storing a user’s answer "Yes"?', choices:['String','Character','Boolean','Integer'], a:0},
{q:'Which of the following is NOT a valid integer?', choices:['25','0','-10','3.14'], a:3},
{q:'Which data type should be used to store the result of 7 ÷ 2?', choices:['Integer','Floating Point','Boolean','Character'], a:1},
{q:'Which of the following is a good example of a boolean variable?', choices:['is_logged_in','username','PI','user_score'], a:0},
{q:'Which of these variable names is invalid?', choices:['_privateData','2ndAttempt','highScore','user_age'], a:1},
{q:'Which constant represents a fixed conversion factor?', choices:['PI','user_input','score','temperature'], a:0},
{q:'Which data type is suitable for storing a postal code like "12345"?', choices:['Integer','String','Character','Boolean'], a:1},
{q:'What is the output of a boolean variable storing False?', choices:['0','False','"False"','All of the above'], a:1},
{q:'Which of the following can be stored in a string variable?', choices:['"Hello World"','50','True','3.14'], a:0},
{q:'Which variable type is used for storing temperatures with decimals?', choices:['Integer','Floating Point','String','Boolean'], a:1},
{q:'Which of these is allowed as a variable name?', choices:['1score','score_1','user score','user-score'], a:1},
{q:'Which of the following is NOT a valid data type?', choices:['Integer','Float','Character','Numbered'], a:3},
{q:'Which constant stores the value of π?', choices:['PI','user_input','user_score','MAX_SCORE'], a:0},
{q:'Which is suitable for storing student grades like 85, 92, 76?', choices:['Integer','String','Boolean','Character'], a:0},
{q:'Which data type is suitable for height in meters like 1.75?', choices:['Integer','Floating Point','String','Boolean'], a:1},
{q:'Which of the following is a valid boolean variable name?', choices:['isActive','1isActive','is active','active?'], a:0},
{q:'Which of these is NOT allowed in variable names?', choices:['Letters','Numbers after the first character','Underscores','Spaces'], a:3},
{q:'Which data type can store "2025-11-28"?', choices:['Integer','String','Boolean','Character'], a:1},
{q:'Which of these is a fixed value in a program?', choices:['user_score','MAX_LEVEL','user_age','current_temperature'], a:1},
{q:'Which of the following is a correct use of a floating-point number?', choices:['0.5','50','True','"Hello"'], a:0},
{q:'Which variable stores the user’s first letter of name?', choices:['first_initial','MAX_SCORE','user_score','PI'], a:0},
{q:'Which of the following is an invalid variable name?', choices:['first_name','firstName','first name','_firstName'], a:2},
{q:'Which variable type is used to store logical values for decision making?', choices:['Integer','Floating Point','Boolean','String'], a:2},
{q:'Which of the following is true about constants?', choices:['They change dynamically','They never change','They store boolean values only','They store string values only'], a:1},
{q:'Which of these is a valid variable name using underscores?', choices:['first_name','first name','first-name','1stName'], a:0},
{q:'Which of the following is suitable for storing the price of an item with cents?', choices:['Integer','Floating Point','Boolean','Character'], a:1},
{q:'Which variable stores the user’s login attempt count?', choices:['attempt_count','MAX_ATTEMPTS','PI','user_score'], a:0},
{q:'Which of these can store a student’s full name?', choices:['String','Character','Boolean','Integer'], a:0},
{q:'Which constant stores a mathematical value that never changes?', choices:['PI','user_score','temperature','user_input'], a:0},
{q:'Which data type is used for True/False conditions?', choices:['Integer','String','Boolean','Character'], a:2},
{q:'Which variable stores the user’s age that may change each year?', choices:['user_age','MAX_AGE','PI','MAX_LEVEL'], a:0},
{q:'Which of these is allowed as the first character in a variable name?', choices:['Letter','Number','Space','-'], a:0},
{q:'Which of the following is an example of a string?', choices:['"Hello"','A','50','True'], a:0},
{q:'Which variable name follows camelCase convention?', choices:['userScore','user_score','USER_SCORE','user-score'], a:0},
{q:'Which of the following is NOT allowed in variable names?', choices:['Underscores','Spaces','Letters','Numbers after first character'], a:1},
{q:'Which data type is suitable for storing a date like "28/11/2025"?', choices:['Integer','String','Boolean','Character'], a:1},
{q:'Which variable can store the user’s password input?', choices:['password','MAX_PASSWORD','PI','MAX_LEVEL'], a:0},
{q:'Which data type is used for storing numeric values without decimals?', choices:['Integer','Floating Point','String','Boolean'], a:0},
{q:'Which of the following is an invalid variable name in Python?', choices:['user_age','_user','1user','userScore'], a:2},
{q:'Which constant stores a maximum limit that does not change?', choices:['MAX_SCORE','user_score','user_age','current_level'], a:0},
{q:'Which data type is most appropriate for storing a single letter?', choices:['String','Character','Integer','Boolean'], a:1},
{q:'Which variable stores the current score in a game?', choices:['user_score','MAX_SCORE','PI','MAX_LEVEL'], a:0},
{q:'Which data type is suitable for storing the price of an item like 15.50?', choices:['Integer','Floating Point','Boolean','Character'], a:1},
{q:'Which of these is a valid integer?', choices:['25','3.14','"25"','True'], a:0},
{q:'Which variable name is invalid due to a space?', choices:['user name','user_name','_userName','userName'], a:0},
{q:'Which of the following is suitable for storing a game level number?', choices:['Integer','Floating Point','Boolean','String'], a:0},
{q:'Which variable stores user input like age, height, or weight?', choices:['user_input','MAX_VALUE','PI','MAX_LEVEL'], a:0},
{q:'Which data type can store "S2023"?', choices:['String','Character','Integer','Boolean'], a:0},
{q:'Which constant stores the value of maximum lives allowed?', choices:['MAX_LIVES','user_lives','MAXLevel','user_score'], a:0},
{q:'Which of the following is correct for storing decimal values?', choices:['Floating Point','Integer','Boolean','Character'], a:0},
{q:'Which constant never changes during program execution?', choices:['PI','user_input','user_score','current_level'], a:0},


];


let quizQuestions = [];
let currentQ = 0;
let answers = [];
let quizSubmitted = false;


function shuffleArray(arr){
  for(let i=arr.length-1;i>0;i--){
    let j=Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]]=[arr[j],arr[i]]
  }
}

function formatTime(totalSeconds) {
  const minutes = Math.floor(totalSeconds / 60);
  const seconds = totalSeconds % 60;
  return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
}

function startOverallTimer() {
  clearInterval(overallTimerInterval);
  const timerBox = document.querySelector('.overall-timer-box');
  const display = document.getElementById('overallTimerDisplay');
  
  overallTimerInterval = setInterval(() => {
    overallTimeRemaining--;
    display.innerText = formatTime(overallTimeRemaining);

    if (overallTimeRemaining <= 300) { // 5 minutes remaining
      timerBox.classList.add('critical');
    }

    if (overallTimeRemaining <= 0) {
      clearInterval(overallTimerInterval);
      alert("Time's up! The quiz will now be submitted.");
      // Force submit the quiz
      submitQ();
    }
  }, 1000);
}


function loadQuiz(){
  // Stop any running timers
  clearInterval(individualTimerInterval);
  clearInterval(overallTimerInterval);
  overallTimeRemaining = TOTAL_QUIZ_TIME;

  // Deep copy and shuffle the question bank
  let shuffledBank = QUESTION_BANK.map(q => ({...q}));
  shuffleArray(shuffledBank);
  
  // Select 30 unique questions and shuffle their choices
  quizQuestions = shuffledBank.slice(0, TOTAL_QUESTIONS);
  quizQuestions.forEach(q => {
    const correctText = q.choices[q.a];
    shuffleArray(q.choices);
    q.a = q.choices.indexOf(correctText); // Update the correct index after shuffle
  });

  currentQ=0;
  answers = new Array(TOTAL_QUESTIONS).fill(undefined);
  quizSubmitted = false;
  
  document.getElementById('overallTimerDisplay').innerText = formatTime(TOTAL_QUIZ_TIME);
  document.querySelector('.overall-timer-box').classList.remove('critical');

  startOverallTimer();
  showQuestion();
  document.getElementById('quizArea').style.display='block';
  document.getElementById('resultBox').classList.remove('show');
}

function startIndividualTimer() {
  clearInterval(individualTimerInterval);
  let timeRemaining = TIME_PER_QUESTION;
  const timerDisplay = document.getElementById('timerDisplay');
  timerDisplay.innerText = formatTime(timeRemaining);
  timerDisplay.classList.remove('warn');

  individualTimerInterval = setInterval(() => {
    timeRemaining--;
    timerDisplay.innerText = formatTime(timeRemaining);

    if (timeRemaining <= 10) {
      timerDisplay.classList.add('warn');
    }

    if (timeRemaining <= 0) {
      clearInterval(individualTimerInterval);
      
      // Time out, move to next question/submit
      if (currentQ < TOTAL_QUESTIONS - 1) {
        nextQ();
      } else {
        // If the overall timer hasn't expired yet, submit the quiz
        if (!quizSubmitted) submitQ();
      }
    }
  }, 1000);
}

function showQuestion(){
  if (quizSubmitted) return;
  
  // Stop individual timer from previous question
  clearInterval(individualTimerInterval);

  const q=quizQuestions[currentQ];
  const area=document.getElementById('quizArea');
  const userAnswer = answers[currentQ];

// FIX APPLIED HERE: Added <br> tag to force a line break in the question text.
  let html='<div class="question-header"><div class="question">Question '+(currentQ+1)+' of '+TOTAL_QUESTIONS+': <br>'+q.q+'</div><div id="timerDisplay" class="timer"></div></div><div class="choices">';
  
  // Generate choices
  q.choices.forEach((c,i)=>{
    const isChecked = userAnswer === i ? 'checked' : '';
    // Attach change listener for immediate saving
    html+='<label class="choice" tabindex="0"><input type="radio" name="choice" value="'+i+'" '+isChecked+' onchange="saveAnswer('+i+')"><span>'+c+'</span></label>'
  });
  html+='</div>';

  // Generate controls
  const nextButtonText = currentQ === TOTAL_QUESTIONS - 1 ? 'Submit Quiz' : 'Next Question';
  const nextButtonAction = currentQ === TOTAL_QUESTIONS - 1 ? 'submitQ()' : 'nextQ()';

  html+='<div class="controls">';
  html+='<div><button onclick="prevQ()" '+(currentQ===0?'disabled':'')+'>← Previous</button></div>';
  html+='<div class="muted">Time limit: '+TIME_PER_QUESTION+' seconds per question.</div>';
  html+='<div><button onclick="'+nextButtonAction+'">'+nextButtonText+'</button></div>';
  html+='</div>';

  area.innerHTML=html;
  updateProgress();
  startIndividualTimer(); // Start the individual timer for the new question
}

window.saveAnswer = function(choiceIndex) {
  if (!quizSubmitted) {
    answers[currentQ] = choiceIndex;
  }
}

window.prevQ = function(){
  if(currentQ>0){
    currentQ--;
    showQuestion();
  }
}

window.nextQ = function(){
  // Stop the individual timer before advancing
  clearInterval(individualTimerInterval);

  if(currentQ < TOTAL_QUESTIONS - 1){
    currentQ++;
    showQuestion();
  }
}

window.submitQ = function(){
  if (quizSubmitted) return; 
  
  // Stop all timers when quiz is submitted
  clearInterval(individualTimerInterval);
  clearInterval(overallTimerInterval);

  quizSubmitted = true;
  let score=0;
  const review=document.getElementById('reviewList');
  review.innerHTML='';
  
  // Calculate Score and build review list
  quizQuestions.forEach((q,i)=>{
    const correct=q.a;
    const user=answers[i];
    const isAnswered = user !== undefined;
    const isCorrect = isAnswered && user===correct;

    if(isCorrect) score++;

    let rItem='<div class="rev-item"><div><strong>Q'+(i+1)+':</strong> '+q.q+'</div><div style="margin-top:8px;">';
    
    q.choices.forEach((c,j)=>{
      let style='padding:6px 8px;border-radius:6px;margin-bottom:6px;';
      if(j===correct) {
        style+='background:rgb(236,250,239);border:1px solid rgba(16,185,129,0.12);'; // Correct Answer Highlight
      } else if(j===user && j!==correct) {
        style+='background:rgb(255,241,242);border:1px solid rgba(220,38,38,0.08);'; // User's Wrong Answer Highlight
      }
      rItem+='<div style="'+style+'">'+c+'</div>'
    });
    
    rItem+='</div>';

    // Status Badge
    let badgeHtml;
    if (isCorrect) {
      badgeHtml = '<span class="correct-badge">Correct</span>';
    } else if (isAnswered) {
      badgeHtml = '<span class="wrong-badge">Wrong</span> Correct answer highlighted above.';
    } else {
      // Check if the time ran out or they just missed it
      badgeHtml = '<span class="unanswered-badge">Unanswered</span> Correct answer highlighted above.';
    }

    rItem+='<div style="margin-top:6px;">'+badgeHtml+'</div></div>';
    review.innerHTML+=rItem
  });

  // Display results
  document.getElementById('scoreText').innerText='Score: '+score+' / '+TOTAL_QUESTIONS+' ('+((score/TOTAL_QUESTIONS*100).toFixed(2))+'%)';
  const passText=document.getElementById('passText');
  
  if(score>=REQUIRED_SCORE){
    passText.innerHTML='<span class="pass">Passed ✓</span> — You needed '+REQUIRED_SCORE+' correct to pass.'
  }else{
    passText.innerHTML='<span class="fail">Failed ✗</span> — You needed '+REQUIRED_SCORE+' correct to pass.'
  }
  
  document.getElementById('resultBox').classList.add('show');
  document.getElementById('quizArea').style.display='none';
}


function updateProgress(){
  document.getElementById('progBar').style.width=((currentQ+1)/TOTAL_QUESTIONS*100)+'%';
}


// Initialize the quiz when the script loads
loadQuiz();
</script>
</body>
</html>